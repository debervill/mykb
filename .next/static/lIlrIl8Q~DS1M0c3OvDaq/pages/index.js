(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{133:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(243),o=(n=r)&&n.__esModule?n:{default:n};t.default=o.default},242:function(e,t,a){__NEXT_REGISTER_PAGE("/",function(){return e.exports=a(270),{page:e.exports.default}})},243:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(0),o=i(r),l=i(a(5)),s=i(a(244)),u=i(a(245));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handlePreviousPage=function(e){var t=a.state.selected;e.preventDefault?e.preventDefault():e.returnValue=!1,t>0&&a.handlePageSelected(t-1,e)},a.handleNextPage=function(e){var t=a.state.selected,n=a.props.pageCount;e.preventDefault?e.preventDefault():e.returnValue=!1,t<n-1&&a.handlePageSelected(t+1,e)},a.handlePageSelected=function(e,t){t.preventDefault?t.preventDefault():t.returnValue=!1,a.state.selected!==e&&(a.setState({selected:e}),a.callCallback(e))},a.callCallback=function(e){void 0!==a.props.onPageChange&&"function"==typeof a.props.onPageChange&&a.props.onPageChange({selected:e})},a.pagination=function(){var e=[],t=a.props,n=t.pageRangeDisplayed,r=t.pageCount,l=t.marginPagesDisplayed,s=t.breakLabel,i=t.breakClassName,c=a.state.selected;if(r<=n)for(var p=0;p<r;p++)e.push(a.getPageElement(p));else{var f=n/2,d=n-f;c>r-n/2?f=n-(d=r-c):c<n/2&&(d=n-(f=c));var m=void 0,h=void 0,g=void 0,b=function(e){return a.getPageElement(e)};for(m=0;m<r;m++)(h=m+1)<=l?e.push(b(m)):h>r-l?e.push(b(m)):m>=c-f&&m<=c+d?e.push(b(m)):s&&e[e.length-1]!==g&&(g=o.default.createElement(u.default,{key:m,breakLabel:s,breakClassName:i}),e.push(g))}return e},a.state={selected:e.initialPage?e.initialPage:e.forcePage?e.forcePage:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),n(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,a=e.disableInitialCallback;void 0===t||a||this.callCallback(t)}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.forcePage&&this.props.forcePage!==e.forcePage&&this.setState({selected:e.forcePage})}},{key:"hrefBuilder",value:function(e){var t=this.props,a=t.hrefBuilder,n=t.pageCount;if(a&&e!==this.state.selected&&e>=0&&e<n)return a(e+1)}},{key:"getPageElement",value:function(e){var t=this.state.selected,a=this.props,n=a.pageClassName,r=a.pageLinkClassName,l=a.activeClassName,u=a.extraAriaContext;return o.default.createElement(s.default,{key:e,onClick:this.handlePageSelected.bind(null,e),selected:t===e,pageClassName:n,pageLinkClassName:r,activeClassName:l,extraAriaContext:u,href:this.hrefBuilder(e),page:e+1})}},{key:"render",value:function(){var e=this.props,t=e.disabledClassName,a=e.previousClassName,n=e.nextClassName,r=e.pageCount,l=e.containerClassName,s=e.previousLinkClassName,u=e.previousLabel,i=e.nextLinkClassName,c=e.nextLabel,p=this.state.selected,f=a+(0===p?" "+t:""),d=n+(p===r-1?" "+t:"");return o.default.createElement("ul",{className:l},o.default.createElement("li",{className:f},o.default.createElement("a",{onClick:this.handlePreviousPage,className:s,href:this.hrefBuilder(p-1),tabIndex:"0",role:"button",onKeyPress:this.handlePreviousPage},u)),this.pagination(),o.default.createElement("li",{className:d},o.default.createElement("a",{onClick:this.handleNextPage,className:i,href:this.hrefBuilder(p+1),tabIndex:"0",role:"button",onKeyPress:this.handleNextPage},c)))}}]),t}();c.propTypes={pageCount:l.default.number.isRequired,pageRangeDisplayed:l.default.number.isRequired,marginPagesDisplayed:l.default.number.isRequired,previousLabel:l.default.node,nextLabel:l.default.node,breakLabel:l.default.node,hrefBuilder:l.default.func,onPageChange:l.default.func,initialPage:l.default.number,forcePage:l.default.number,disableInitialCallback:l.default.bool,containerClassName:l.default.string,pageClassName:l.default.string,pageLinkClassName:l.default.string,activeClassName:l.default.string,previousClassName:l.default.string,nextClassName:l.default.string,previousLinkClassName:l.default.string,nextLinkClassName:l.default.string,disabledClassName:l.default.string,breakClassName:l.default.string},c.defaultProps={pageCount:10,pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousClassName:"previous",nextClassName:"next",previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1},t.default=c},244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){var t=e.pageClassName,a=e.pageLinkClassName,n=e.onClick,r=e.href,l="Page "+e.page+(e.extraAriaContext?" "+e.extraAriaContext:""),s=null;return e.selected&&(s="page",l="Page "+e.page+" is your current page",t=void 0!==t?t+" "+e.activeClassName:e.activeClassName),o.default.createElement("li",{className:t},o.default.createElement("a",{onClick:n,role:"button",className:a,href:r,tabIndex:"0","aria-label":l,"aria-current":s,onKeyPress:n},e.page))}},245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(0),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){var t=e.breakLabel,a=e.breakClassName||"break";return o.default.createElement("li",{className:a},t)}},270:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(0),l=a.n(o),s=a(9),u=a(19),i=a.n(u),c=a(133),p=a.n(c),f=a(60),d=a(17),m=a(23),h=a(35),g=a(47),b=a.n(g),v=a(2),y=a.n(v),P=function(e){var t=e.id,a=e.name,n=e.dir,r=e.updated;a=n+(n.length>0?"/":"")+a;var o=y()("k/"+t),s={pathname:"/k",query:{id:t}};return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(b.a,{href:s,as:o},l.a.createElement("a",null,l.a.createElement("p",{className:"noMargin"},a,l.a.createElement("span",{className:"float-right"},new Date(r).toLocaleDateString("en-US")))))))},C=a(16),k=a.n(C);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=a(8);function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}function O(e,t,a,n,r,o,l){try{var s=e[o](l),u=s.value}catch(e){return void a(e)}s.done?t(u):Promise.resolve(u).then(n,r)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var j=["id","name","updated","dir"].map(function(e,t){return x({},"$select[".concat(t,"]"),e)}),_=function(){var e,t=(e=r.a.mark(function e(t,a){var n,o,l,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()(y()("docs",Boolean(a))+t,{headers:{Authorization:a||Object(N.a)()}}).catch(function(e){return{ok:!1,error:e.message}});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:return o=e.sent,l=o.total||0,s=o.data||[],e.abrupt("return",{docs:s,total:l});case 10:return e.abrupt("return",{total:0,docs:[],error:n.message});case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function l(e){O(o,n,r,l,s,"next",e)}function s(e){O(o,n,r,l,s,"throw",e)}l(void 0)})});return function(e,a){return t.apply(this,arguments)}}(),S=function(e){e.$search||delete e.$search,e.$skip?e.$skip=12*(e.$skip-1):delete e.$skip;var t=function(e){var t,a;switch(E(e)){case"object":a=e[t=Object.keys(e).pop()];break;case"string":var n=e.split(":");t=n[0],a=n[1]}return"$sort[".concat(t,"]=").concat(a)}(e.$sort?e.$sort:"updated:-1");delete e.$sort,j.forEach(function(t){return e=w({},e,t)}),e=w({$limit:12},e);var a=Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&");return a="?".concat(a,"&").concat(t)},$=a(12);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){Q(e,t,a[t])})}return e}function M(e,t,a,n,r,o,l){try{var s=e[o](l),u=s.value}catch(e){return void a(e)}s.done?t(u):Promise.resolve(u).then(n,r)}function R(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function l(e){M(o,n,r,l,s,"next",e)}function s(e){M(o,n,r,l,s,"throw",e)}l(void 0)})}}function I(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var U=function(e){function t(){var e,a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=this,o=(e=A(t)).call.apply(e,[this].concat(s)),a=!o||"object"!==D(o)&&"function"!=typeof o?B(n):o,Q(B(B(a)),"state",{$sort:"updated:-1",$search:"",page:1,pending:!1,error:null,total:0,docs:[]}),Q(B(B(a)),"pushQuery",function(e){return i.a.push({pathname:"/",query:e},Object(f.format)({pathname:y()("/"),query:e}))}),Q(B(B(a)),"updDocs",function(e,t){clearTimeout(a.docsTime),a.docsTime=setTimeout(R(r.a.mark(function e(){var n,o,l,s,u,i,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,o=n.$sort,l=n.$search,s=n.page,t&&(u={search:l},l||delete u.search,a.pushQuery(u)),a.setState({error:null}),a.docsTime=setTimeout(function(){a.setState({pending:!0})},125),i=S({$search:l,$sort:o,$skip:s}),e.next=7,_(i);case 7:c=e.sent,clearTimeout(a.docsTime),a.setState(T({},c,{pending:!1}));case 10:case"end":return e.stop()}},e,this)})),e||275)}),Q(B(B(a)),"updQuery",function(e){a.setState(Q({},e.target.id,e.target.value)),a.updDocs(0,"$search"===e.target.id)}),Q(B(B(a)),"handlePage",function(e){var t=e.selected,n=a.state.$search,r=t+1,o={};a.setState({page:r}),r>1&&(o.page=r),n&&(o.search=n),a.pushQuery(o),a.updDocs(1)}),a}var a,n,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,o["Component"]),a=t,n=[{key:"componentDidMount",value:function(){this.updDocs(1)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.user,n=t.docs;e.user.email!==a.email&&a.email&&0===n.length&&this.updDocs(1)}},{key:"render",value:function(){var e=this.state,t=e.$sort,a=e.$search,n=e.pending,r=e.error,o=e.docs,s=e.total,u=e.page,i=Math.ceil(s/12);return l.a.createElement(d.a,null,l.a.createElement(m.a,null,l.a.createElement("input",{type:"text",placeholder:"Search knowledge base...",maxLength:128,value:a,className:"search",id:"$search",onChange:this.updQuery})),l.a.createElement(m.a,null,l.a.createElement("div",{className:"inline",style:{width:"100%"}},l.a.createElement("h4",{className:"noMargin"},"Docs"),l.a.createElement("div",{className:"float-right inline"},l.a.createElement("label",{htmlFor:"sort"},"Sort: "),l.a.createElement("select",{id:"$sort",value:t,onChange:this.updQuery,style:{width:150}},l.a.createElement("option",{value:"updated:-1"},"Updated (new -> old)"),l.a.createElement("option",{value:"updated:1"},"Updated (old -> new)"),l.a.createElement("option",{value:"created:-1"},"Created (new -> old)"),l.a.createElement("option",{value:"created:1"},"Created (old -> new)"),l.a.createElement("option",{value:"dirName:1"},"Name (A -> Z)"),l.a.createElement("option",{value:"dirName:-1"},"Name (Z -> A)"))))),l.a.createElement(m.a,null,o.length>0||r||n?null:l.a.createElement("p",null,"No docs found..."),r?l.a.createElement("p",null,r):null,!n||r?null:l.a.createElement(h.a,{style:{margin:"25px auto 0"}}),o.length<1||n||r?null:l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Doc ",l.a.createElement("span",{className:"float-right"},"Modified")))),l.a.createElement("tbody",null,o.map(function(e){return l.a.createElement(P,L({},e,{key:e.id}))}))),i<2?null:l.a.createElement(p.a,{pageCount:i,containerClassName:"paginate",activeClassName:"active",onPageChange:this.handlePage,forcePage:u-1}))))}}],s=[{key:"getInitialProps",value:(u=R(r.a.mark(function e(t){var a,n,o,l,s,u,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.req,n=t.query,o=1,l="",n&&(o=n.page||o,l=n.search||l),s=Object(N.a)(a)){e.next=6;break}return e.abrupt("return",{total:0,docs:[]});case 6:return u=S({$search:l,$skip:o}),e.next=9,_(u,!!a&&s);case 9:return i=e.sent,e.abrupt("return",T({},i,{page:o,$search:l}));case 11:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"getDerivedStateFromProps",value:function(e,t){var a=e.docs,n=e.total,r=e.page,o=e.$search;return t.didInit||r===t.page&&o===t.$search?null:{total:n,docs:a,page:r,$search:o,pending:!1,didInit:!0}}}],n&&I(a.prototype,n),s&&I(a,s),t}();t.default=Object(s.b)($.a)(U)}},[[242,1,0]]]);