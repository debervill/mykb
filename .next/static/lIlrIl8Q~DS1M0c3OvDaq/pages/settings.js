(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{250:function(e,t,n){__NEXT_REGISTER_PAGE("/settings",function(){return e.exports=n(251),{page:e.exports.default}})},251:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(0),o=n.n(s),u=n(9),c=n(16),i=n.n(c),l=n(17),p=n(23),f=n(35),d=n(33),b=n(12),w=n(2),m=n.n(w),h=n(8);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,n,r,a,s,o){try{var u=e[s](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(){var e,n,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return r=this,s=(e=g(t)).call.apply(e,[this].concat(u)),n=!s||"object"!==y(s)&&"function"!=typeof s?k(r):s,x(k(k(n)),"state",{pending:!1,passErr:null,curPass:"",newPass:"",confPass:""}),x(k(k(n)),"updVal",d.a.bind(k(k(n)))),x(k(k(n)),"submit",function(){var e,t=(e=a.a.mark(function e(t){var r,s,o,u,c,l,p,f,d,b,w,y,P,v,g,E;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.state,s=r.pending,o=r.curPass,u=r.newPass,c=r.confPass,l=n.props.user,p=l.email,f=l._id,!s){e.next=5;break}return e.abrupt("return");case 5:d=function(e){return n.setState({pending:!1,passErr:e})},b={"Current password":o,"New password":u,"Confirm new password":c},w=Object.keys(b),y=0;case 9:if(!(y<w.length)){e.next=16;break}if(P=w[y],0!==b[P].length){e.next=13;break}return e.abrupt("return",d("".concat(P," is required")));case 13:y++,e.next=9;break;case 16:if(u===c){e.next=18;break}return e.abrupt("return",d("New passwords don't match"));case 18:return n.setState({passErr:null,pending:!0}),e.next=21,i()(m()("users/"+f),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:Object(h.a)()},body:JSON.stringify({email:p,password:o,newPassword:u})}).catch(d);case 21:if(!(v=e.sent).ok){e.next=26;break}n.setState({curPass:"",newPass:"",confPass:"",passErr:"Password updated successfully",pending:!1}),e.next=38;break;case 26:return g="failed to update password",e.prev=27,e.next=30,v.json();case 30:E=e.sent,g=E.message||g,e.next=37;break;case 34:e.prev=34,e.t0=e.catch(27),d(e.t0.message);case 37:d(g);case 38:case"end":return e.stop()}},e,this,[[27,34]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var s=e.apply(t,n);function o(e){P(s,r,a,o,u,"next",e)}function u(e){P(s,r,a,o,u,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}()),n}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,s["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.pending,n=e.passErr,r=e.curPass,a=e.newPass,s=e.confPass;return o.a.createElement(l.a,null,o.a.createElement(p.a,{amount:25},o.a.createElement("h3",null,"Account settings"),o.a.createElement("hr",null),o.a.createElement("form",{noValidate:!0,style:{padding:"0 0 45px"}},o.a.createElement("h4",null,"Change password"),o.a.createElement("fieldset",null,o.a.createElement("label",{htmlFor:"curPass"},"Current Password"),o.a.createElement("input",{type:"password",id:"curPass",onChange:this.updVal,placeholder:"Current super secret password...",value:r}),o.a.createElement("label",{htmlFor:"newPass"},"New Password"),o.a.createElement("input",{type:"password",id:"newPass",onChange:this.updVal,placeholder:"New super secret password...",value:a}),o.a.createElement("label",{htmlFor:"confPass"},"Confirm New Password"),o.a.createElement("input",{type:"password",id:"confPass",onChange:this.updVal,placeholder:"Confirm new super secret password...",value:s})),o.a.createElement("button",{onClick:this.submit,className:"float-right"+(t?" disabled":"")},t?o.a.createElement(f.a,null):"Submit"),n?o.a.createElement("p",null,n):null)))}}])&&v(n.prototype,r),u&&v(n,u),t}();t.default=Object(u.b)(b.a)(O)},33:function(e,t,n){"use strict";function r(e){var t,n,r,a=e.target;this.setState((t={},n=a.id,r=a.value,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}n.d(t,"a",function(){return r})}},[[250,1,0]]]);