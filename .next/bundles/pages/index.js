module.exports=__NEXT_REGISTER_PAGE("/",function(){var e=webpackJsonp([5],{249:function(e,t,a){e.exports=a(250)},250:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(6);var n=a.n(r);var l=a(0);var o=a.n(l);var u=a(22);var i=a(36);var s=a.n(i);var c=a(251);var f=a.n(c);var p=a(59);var d=a.n(p);var v=a(35);var m=a(61);var b=a(60);var h=a(90);var g=a.n(h);var y=a(9);var P=a.n(y);var C=function e(t){var a=t.id,r=t.name,n=t.dir,l=t.updated;r=n+(n.length>0?"/":"")+r;var u=P()("k/"+a);var i={pathname:"/k",query:{id:a}};return o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(g.a,{href:i,as:u},o.a.createElement("a",null,o.a.createElement("p",{className:"noMargin"},r,o.a.createElement("span",{className:"float-right"},new Date(l).toLocaleDateString("en-US")))))))};var k=C;var E=a(34);var N=a.n(E);function w(e){w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return w(e)}var O=function(e){var t,a;switch(w(e)){case"object":t=Object.keys(e).pop();a=e[t];break;case"string":var r=e.split(":");t=r[0];a=r[1];break;default:break}return"$sort[".concat(t,"]=").concat(a)};var x=a(23);function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};var r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})));r.forEach(function(t){S(e,t,a[t])})}return e}function _(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var l=e.apply(t,a);function o(e,t){try{var a=l[e](t);var o=a.value}catch(e){n(e);return}a.done?r(o):Promise.resolve(o).then(u,i)}function u(e){o("next",e)}function i(e){o("throw",e)}u()})}}function S(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}var $=12;var D=["id","name","updated","dir"].map(function(e,t){return S({},"$select[".concat(t,"]"),e)});var L=function(){var e=_(n.a.mark(function e(t,a){var r,l,o,u;return n.a.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return N()(P()("docs",Boolean(a))+t,{headers:{Authorization:a||Object(x["a"])()}}).catch(function(e){var t=e.message;return{ok:false,error:t}});case 2:r=n.sent;if(!r.ok){n.next=10;break}n.next=6;return r.json();case 6:l=n.sent;o=l.total||0;u=l.data||[];return n.abrupt("return",{docs:u,total:o});case 10:return n.abrupt("return",{total:0,docs:[],error:r.message});case 11:case"end":return n.stop()}},e,this)}));return function t(a,r){return e.apply(this,arguments)}}();var T=function e(t){t.$search||delete t.$search;t.$skip?t.$skip=(t.$skip-1)*$:delete t.$skip;var a=O(t.$sort?t.$sort:"updated:-1");delete t.$sort;D.forEach(function(e){return t=j({},t,e)});t=j({$limit:$},t);var r=Object.keys(t).map(function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))}).join("&");r="?".concat(r,"&").concat(a);return r};var M=a(28);function R(e){R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return R(e)}function A(){A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};return A.apply(this,arguments)}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};var r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})));r.forEach(function(t){q(e,t,a[t])})}return e}function q(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}function B(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var l=e.apply(t,a);function o(e,t){try{var a=l[e](t);var o=a.value}catch(e){n(e);return}a.done?r(o):Promise.resolve(o).then(u,i)}function u(e){o("next",e)}function i(e){o("throw",e)}u()})}}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function K(e,t,a){t&&U(e.prototype,t);a&&U(e,a);return e}function V(e,t){if(t&&("object"===R(t)||"function"===typeof t))return t;return G(e)}function F(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Z=function(e){F(t,e);function t(){var e;var a,r;Q(this,t);for(var l=arguments.length,o=new Array(l),u=0;u<l;u++)o[u]=arguments[u];return V(r,(a=r=V(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),Object.defineProperty(G(r),"state",{configurable:true,enumerable:true,writable:true,value:{$sort:"updated:-1",$search:"",page:1,pending:false,error:null,total:0,docs:[]}}),Object.defineProperty(G(r),"pushQuery",{configurable:true,enumerable:true,writable:true,value:function e(t){return s.a.push({pathname:"/",query:t},Object(p["format"])({pathname:P()("/"),query:t}))}}),Object.defineProperty(G(r),"updDocs",{configurable:true,enumerable:true,writable:true,value:function e(t,a){clearTimeout(r.docsTime);r.docsTime=setTimeout(B(n.a.mark(function e(){var t,l,o,u,i,s,c;return n.a.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:t=r.state,l=t.$sort,o=t.$search,u=t.page;if(a){i={search:o};o||delete i.search;r.pushQuery(i)}r.setState({error:null});r.docsTime=setTimeout(function(){r.setState({pending:true})},125);s=T({$search:o,$sort:l,$skip:u});n.next=7;return L(s);case 7:c=n.sent;clearTimeout(r.docsTime);r.setState(I({},c,{pending:false}));case 10:case"end":return n.stop()}},e,this)})),t||275)}}),Object.defineProperty(G(r),"updQuery",{configurable:true,enumerable:true,writable:true,value:function e(t){r.setState(q({},t.target.id,t.target.value));r.updDocs(0,"$search"===t.target.id)}}),Object.defineProperty(G(r),"handlePage",{configurable:true,enumerable:true,writable:true,value:function e(t){var a=t.selected;var n=r.state.$search;var l=a+1;var o={};r.setState({page:l});l>1&&(o.page=l);n&&(o.search=n);r.pushQuery(o);r.updDocs(1)}}),a))}K(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.user,n=a.docs;if(t.user.email===r.email)return;r.email&&0===n.length&&this.updDocs(1)}},{key:"render",value:function e(){var t=this.state,a=t.$sort,r=t.$search,n=t.pending,l=t.error,u=t.docs,i=t.total,s=t.page;var c=Math.ceil(i/$);return o.a.createElement(v["a"],null,o.a.createElement(m["a"],null,o.a.createElement("input",{type:"text",placeholder:"Search knowledge base...",maxLength:128,value:r,className:"search",id:"$search",onChange:this.updQuery})),o.a.createElement(m["a"],null,o.a.createElement("div",{className:"inline",style:{width:"100%"}},o.a.createElement("h4",{className:"noMargin"},"Docs"),o.a.createElement("div",{className:"float-right inline"},o.a.createElement("label",{htmlFor:"sort"},"Sort: "),o.a.createElement("select",{id:"$sort",value:a,onChange:this.updQuery,style:{width:150}},o.a.createElement("option",{value:"updated:-1"},"Updated (new -> old)"),o.a.createElement("option",{value:"updated:1"},"Updated (old -> new)"),o.a.createElement("option",{value:"created:-1"},"Created (new -> old)"),o.a.createElement("option",{value:"created:1"},"Created (old -> new)"),o.a.createElement("option",{value:"dirName:1"},"Name (A -> Z)"),o.a.createElement("option",{value:"dirName:-1"},"Name (Z -> A)"))))),o.a.createElement(m["a"],null,u.length>0||l||n?null:o.a.createElement("p",null,"No docs found..."),l?o.a.createElement("p",null,l):null,!n||l?null:o.a.createElement(b["a"],{style:{margin:"25px auto 0"}}),u.length<1||n||l?null:o.a.createElement("div",null,o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Doc ",o.a.createElement("span",{className:"float-right"},"Modified")))),o.a.createElement("tbody",null,u.map(function(e){return o.a.createElement(k,A({},e,{key:e.id}))}))),c<2?null:o.a.createElement(f.a,{pageCount:c,containerClassName:"paginate",activeClassName:"active",onPageChange:this.handlePage,forcePage:s-1}))))}}],[{key:"getInitialProps",value:function(){var e=B(n.a.mark(function e(t){var a,r,l,o,u,i,s;return n.a.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:a=t.req,r=t.query;l=1,o="";if(r){l=r.page||l;o=r.search||o}u=Object(x["a"])(a);if(u){n.next=6;break}return n.abrupt("return",{total:0,docs:[]});case 6:i=T({$search:o,$skip:l});n.next=9;return L(i,!!a&&u);case 9:s=n.sent;return n.abrupt("return",I({},s,{page:l,$search:o}));case 11:case"end":return n.stop()}},e,this)}));return function t(a){return e.apply(this,arguments)}}()},{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.docs,n=t.total,l=t.page,o=t.$search;if(r.length!==a.docs.length||l!==a.page||o!==a.$search)return{total:n,docs:r,page:l,$search:o,pending:false};return null}}]);return t}(l["Component"]);var z=t["default"]=Object(u["b"])(M["a"])(Z)},251:function(e,t,a){"use strict";var r=a(252);var n=l(r);function l(e){return e&&e.__esModule?e:{default:e}}e.exports=n.default},252:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();var n=a(0);var l=p(n);var o=a(20);var u=p(o);var i=a(253);var s=p(i);var c=a(254);var f=p(c);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){m(t,e);function t(e){d(this,t);var a=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handlePreviousPage=function(e){var t=a.state.selected;e.preventDefault?e.preventDefault():e.returnValue=false;t>0&&a.handlePageSelected(t-1,e)};a.handleNextPage=function(e){var t=a.state.selected;var r=a.props.pageCount;e.preventDefault?e.preventDefault():e.returnValue=false;t<r-1&&a.handlePageSelected(t+1,e)};a.handlePageSelected=function(e,t){t.preventDefault?t.preventDefault():t.returnValue=false;if(a.state.selected===e)return;a.setState({selected:e});a.callCallback(e)};a.callCallback=function(e){"undefined"!==typeof a.props.onPageChange&&"function"===typeof a.props.onPageChange&&a.props.onPageChange({selected:e})};a.pagination=function(){var e=[];var t=a.props,r=t.pageRangeDisplayed,n=t.pageCount,o=t.marginPagesDisplayed,u=t.breakLabel,i=t.breakClassName;var s=a.state.selected;if(n<=r)for(var c=0;c<n;c++)e.push(a.getPageElement(c));else{var p=r/2;var d=r-p;if(s>n-r/2){d=n-s;p=r-d}else if(s<r/2){p=s;d=r-p}var v=void 0;var m=void 0;var b=void 0;var h=function e(t){return a.getPageElement(t)};for(v=0;v<n;v++){m=v+1;if(m<=o){e.push(h(v));continue}if(m>n-o){e.push(h(v));continue}if(v>=s-p&&v<=s+d){e.push(h(v));continue}if(u&&e[e.length-1]!==b){b=l.default.createElement(f.default,{key:v,breakLabel:u,breakClassName:i});e.push(b)}}}return e};a.state={selected:e.initialPage?e.initialPage:e.forcePage?e.forcePage:0};return a}r(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.initialPage,r=t.disableInitialCallback;"undefined"===typeof a||r||this.callCallback(a)}},{key:"componentWillReceiveProps",value:function e(t){"undefined"!==typeof t.forcePage&&this.props.forcePage!==t.forcePage&&this.setState({selected:t.forcePage})}},{key:"hrefBuilder",value:function e(t){var a=this.props,e=a.hrefBuilder,r=a.pageCount;if(e&&t!==this.state.selected&&t>=0&&t<r)return e(t+1)}},{key:"getPageElement",value:function e(t){var a=this.state.selected;var r=this.props,n=r.pageClassName,o=r.pageLinkClassName,u=r.activeClassName,i=r.extraAriaContext;return l.default.createElement(s.default,{key:t,onClick:this.handlePageSelected.bind(null,t),selected:a===t,pageClassName:n,pageLinkClassName:o,activeClassName:u,extraAriaContext:i,href:this.hrefBuilder(t),page:t+1})}},{key:"render",value:function e(){var t=this.props,a=t.disabledClassName,r=t.previousClassName,n=t.nextClassName,o=t.pageCount,u=t.containerClassName,i=t.previousLinkClassName,s=t.previousLabel,c=t.nextLinkClassName,f=t.nextLabel;var p=this.state.selected;var d=r+(0===p?" "+a:"");var v=n+(p===o-1?" "+a:"");return l.default.createElement("ul",{className:u},l.default.createElement("li",{className:d},l.default.createElement("a",{onClick:this.handlePreviousPage,className:i,href:this.hrefBuilder(p-1),tabIndex:"0",role:"button",onKeyPress:this.handlePreviousPage},s)),this.pagination(),l.default.createElement("li",{className:v},l.default.createElement("a",{onClick:this.handleNextPage,className:c,href:this.hrefBuilder(p+1),tabIndex:"0",role:"button",onKeyPress:this.handleNextPage},f)))}}]);return t}(n.Component);b.propTypes={pageCount:u.default.number.isRequired,pageRangeDisplayed:u.default.number.isRequired,marginPagesDisplayed:u.default.number.isRequired,previousLabel:u.default.node,nextLabel:u.default.node,breakLabel:u.default.node,hrefBuilder:u.default.func,onPageChange:u.default.func,initialPage:u.default.number,forcePage:u.default.number,disableInitialCallback:u.default.bool,containerClassName:u.default.string,pageClassName:u.default.string,pageLinkClassName:u.default.string,activeClassName:u.default.string,previousClassName:u.default.string,nextClassName:u.default.string,previousLinkClassName:u.default.string,nextLinkClassName:u.default.string,disabledClassName:u.default.string,breakClassName:u.default.string};b.defaultProps={pageCount:10,pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousClassName:"previous",nextClassName:"next",previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:false};t.default=b},253:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(0);var n=l(r);function l(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var a=t.pageClassName;var r=t.pageLinkClassName;var l=t.onClick;var o=t.href;var u="Page "+t.page+(t.extraAriaContext?" "+t.extraAriaContext:"");var i=null;if(t.selected){i="page";u="Page "+t.page+" is your current page";a="undefined"!==typeof a?a+" "+t.activeClassName:t.activeClassName}return n.default.createElement("li",{className:a},n.default.createElement("a",{onClick:l,role:"button",className:r,href:o,tabIndex:"0","aria-label":u,"aria-current":i,onKeyPress:l},t.page))};t.default=o},254:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(0);var n=l(r);function l(e){return e&&e.__esModule?e:{default:e}}var o=function e(t){var a=t.breakLabel;var r=t.breakClassName||"break";return n.default.createElement("li",{className:r},a)};t.default=o}},[249]);return{page:e.default}});