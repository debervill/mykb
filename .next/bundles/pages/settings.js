module.exports=__NEXT_REGISTER_PAGE("/settings",function(){var e=webpackJsonp([8],{260:function(e,t,r){e.exports=r(261)},261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(6);var a=r.n(n);var s=r(0);var o=r.n(s);var u=r(22);var l=r(34);var c=r.n(l);var i=r(35);var p=r(62);var f=r(61);var d=r(48);var b=r(28);var m=r(9);var w=r.n(m);var v=r(23);function h(e){h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return h(e)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function o(e,t){try{var r=s[e](t);var o=r.value}catch(e){a(e);return}r.done?n(o):Promise.resolve(o).then(u,l)}function u(e){o("next",e)}function l(e){o("throw",e)}u()})}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function E(e,t,r){t&&g(e.prototype,t);r&&g(e,r);return e}function O(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;return x(e)}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){j(t,e);function t(){var e;var r,n;P(this,t);for(var s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];return O(n,(r=n=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),Object.defineProperty(x(n),"state",{configurable:true,enumerable:true,writable:true,value:{pending:false,passErr:null,curPass:"",newPass:"",confPass:""}}),Object.defineProperty(x(n),"updVal",{configurable:true,enumerable:true,writable:true,value:d["a"].bind(x(n))}),Object.defineProperty(x(n),"submit",{configurable:true,enumerable:true,writable:true,value:function(){var e=y(a.a.mark(function e(t){var r,s,o,u,l,i,p,f,d,b,m,h,y,P,g,E,O;return a.a.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:t.preventDefault();r=n.state,s=r.pending,o=r.curPass,u=r.newPass,l=r.confPass;i=n.props.user,p=i.email,f=i._id;if(!s){a.next=5;break}return a.abrupt("return");case 5:d=function e(t){return n.setState({pending:false,passErr:t})};b={"Current password":o,"New password":u,"Confirm new password":l};m=Object.keys(b);h=0;case 9:if(!(h<m.length)){a.next=16;break}y=m[h],P=b[y];if(!(0===P.length)){a.next=13;break}return a.abrupt("return",d("".concat(y," is required")));case 13:h++;a.next=9;break;case 16:if(!(u!==l)){a.next=18;break}return a.abrupt("return",d("New passwords don't match"));case 18:n.setState({passErr:null,pending:true});a.next=21;return c()(w()("users/"+f),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:Object(v["a"])()},body:JSON.stringify({email:p,password:o,newPassword:u})}).catch(d);case 21:g=a.sent;if(!g.ok){a.next=26;break}n.setState({curPass:"",newPass:"",confPass:"",passErr:"Password updated successfully",pending:false});a.next=38;break;case 26:E="failed to update password";a.prev=27;a.next=30;return g.json();case 30:O=a.sent;E=O.message||E;a.next=37;break;case 34:a.prev=34;a.t0=a["catch"](27);d(a.t0.message);case 37:d(E);case 38:case"end":return a.stop()}},e,this,[[27,34]])}));return function t(r){return e.apply(this,arguments)}}()}),r))}E(t,[{key:"render",value:function e(){var t=this.state,r=t.pending,n=t.passErr,a=t.curPass,s=t.newPass,u=t.confPass;return o.a.createElement(i["a"],null,o.a.createElement(p["a"],{amount:25},o.a.createElement("h3",null,"Account settings"),o.a.createElement("hr",null),o.a.createElement("form",{noValidate:true,style:{padding:"0 0 45px"}},o.a.createElement("h4",null,"Change password"),o.a.createElement("fieldset",null,o.a.createElement("label",{htmlFor:"curPass"},"Current Password"),o.a.createElement("input",{type:"password",id:"curPass",onChange:this.updVal,placeholder:"Current super secret password...",value:a}),o.a.createElement("label",{htmlFor:"newPass"},"New Password"),o.a.createElement("input",{type:"password",id:"newPass",onChange:this.updVal,placeholder:"New super secret password...",value:s}),o.a.createElement("label",{htmlFor:"confPass"},"Confirm New Password"),o.a.createElement("input",{type:"password",id:"confPass",onChange:this.updVal,placeholder:"Confirm new super secret password...",value:u})),o.a.createElement("button",{onClick:this.submit,className:"float-right"+(r?" disabled":"")},r?o.a.createElement(f["a"],null):"Submit"),n?o.a.createElement("p",null,n):null)))}}]);return t}(s["Component"]);t["default"]=Object(u["b"])(b["a"])(k)},48:function(e,t,r){"use strict";t["a"]=a;function n(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e){var t=e.target;this.setState(n({},t.id,t.value))}}},[260]);return{page:e.default}});