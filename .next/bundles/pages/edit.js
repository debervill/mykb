module.exports=__NEXT_REGISTER_PAGE("/edit",function(){var e=webpackJsonp([3],{10:function(e,t,r){e.exports=r(47)},235:function(e,t,r){e.exports=r(236)},236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(0);var a=r.n(n);var o=r(35);var u=r(92);var i=r(95);function c(e){c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function f(e,t,r){t&&s(e.prototype,t);r&&s(e,r);return e}function d(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){v(t,e);function t(){l(this,t);return d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=this.props,r=t.found,n=t.doc;if(!r)return a.a.createElement(o["a"],null,a.a.createElement("h3",null,"Doc not found..."));return a.a.createElement(u["a"],{doc:n})}}]);return t}(n["Component"]);t["default"]=Object(i["a"])(m)},47:function(e,t,r){"use strict";var n=r(2);Object.defineProperty(t,"__esModule",{value:true});t.default=m;t.registerChunk=h;t.flushChunks=b;t.SameLoopPromise=void 0;var a=n(r(62));var o=n(r(56));var u=n(r(16));var i=n(r(6));var c=n(r(7));var l=n(r(17));var s=n(r(18));var f=n(r(28));var d=n(r(0));var p=r(15);var v=new f.default;function m(e,t){var r;var n;if(e instanceof y){r=e;n=t||{}}else{if(!e.modules||!e.render){var a="`next/dynamic` options should contain `modules` and `render` fields";throw new Error(a)}if(t){var f="Add additional `next/dynamic` options to the first argument containing the `modules` and `render` fields";throw new Error(f)}n=e}return function(e){(0,s.default)(t,e);function t(){var e;var r;(0,i.default)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];r=(0,l.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(o)));r.LoadingComponent=n.loading?n.loading:function(){return d.default.createElement("p",null,"loading...")};r.ssr=false!==n.ssr||n.ssr;r.state={AsyncComponent:null,asyncElement:null};r.isServer="undefined"===typeof window;r.loadBundleAgain=null;r.loadingBundle=false;r.ssr&&r.load();return r}(0,c.default)(t,[{key:"load",value:function e(){r?this.loadComponent():this.loadBundle(this.props)}},{key:"loadComponent",value:function e(){var n=this;r.then(function(e){var r=e.default||e;var a=(0,p.getDisplayName)(r);a&&(t.displayName="DynamicComponent for ".concat(a));if(n.mounted)n.setState({AsyncComponent:r});else{n.isServer&&h(e.__webpackChunkName);n.state.AsyncComponent=r}})}},{key:"loadBundle",value:function e(r){var a=this;this.loadBundleAgain=null;this.loadingBundle=true;var u=n.modules(r);var i=(0,o.default)(u);var c=i.length;var l={};var s=function e(){if(a.loadBundleAgain){a.loadBundle(a.loadBundleAgain);return}a.loadingBundle=false;t.displayName="DynamicBundle";var o=n.render(r,l);a.mounted?a.setState({asyncElement:o}):a.state.asyncElement=o};var f=function e(t){var r=u[t];r.then(function(e){var r=e.default||e;a.isServer&&h(e.__webpackChunkName);l[t]=r;c--;0===c&&s()})};i.forEach(f)}},{key:"componentDidMount",value:function e(){this.mounted=true;this.ssr||this.load()}},{key:"componentWillReceiveProps",value:function e(t){if(r)return;this.setState({asyncElement:null});if(this.loadingBundle){this.loadBundleAgain=t;return}this.loadBundle(t)}},{key:"componentWillUnmount",value:function e(){this.mounted=false}},{key:"render",value:function e(){var t=this.state,r=t.AsyncComponent,n=t.asyncElement;var a=this.LoadingComponent;if(n)return n;if(r)return d.default.createElement(r,this.props);return d.default.createElement(a,this.props)}}]);return t}(d.default.Component)}function h(e){v.add(e)}function b(){var e=(0,a.default)(v);v.clear();return e}var y=function(){(0,c.default)(e,null,[{key:"resolve",value:function t(r){var n=new e(function(e){return e(r)});return n}}]);function e(t){(0,i.default)(this,e);this.onResultCallbacks=[];this.onErrorCallbacks=[];this.cb=t}(0,c.default)(e,[{key:"setResult",value:function e(t){this.gotResult=true;this.result=t;this.onResultCallbacks.forEach(function(e){return e(t)});this.onResultCallbacks=[]}},{key:"setError",value:function e(t){this.gotError=true;this.error=t;this.onErrorCallbacks.forEach(function(e){return e(t)});this.onErrorCallbacks=[]}},{key:"then",value:function t(r,n){var a=this;this.runIfNeeded();var o=new e;var u=function e(){n?o.setResult(n(a.error)):o.setError(a.error)};var i=function e(){o.setResult(r(a.result))};if(this.gotResult){i();return o}if(this.gotError){u();return o}this.onResultCallbacks.push(i);this.onErrorCallbacks.push(u);return o}},{key:"catch",value:function t(r){var n=this;this.runIfNeeded();var a=new e;var o=function e(){a.setResult(r(n.error))};var u=function e(){a.setResult(n.result)};if(this.gotResult){u();return a}if(this.gotError){o();return a}this.onErrorCallbacks.push(o);this.onResultCallbacks.push(u);return a}},{key:"runIfNeeded",value:function e(){var t=this;if(!this.cb)return;if(this.ran)return;this.ran=true;this.cb(function(e){return t.setResult(e)},function(e){return t.setError(e)})}}]);return e}();t.SameLoopPromise=y},48:function(e,t,r){"use strict";var n=r(0);var a=r.n(n);var o=r(10);var u=r.n(o);function i(){i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return i.apply(this,arguments)}var c=function e(t){var r=function e(){var r="";var n={};if("undefined"!==typeof document){var o=document.querySelector(t);if(o){r=o.innerHTML;o.getAttributeNames().forEach(function(e){var t="class"===e?"className":e;n[t]=o.getAttribute(e)})}}return a.a.createElement("div",i({},n,{dangerouslySetInnerHTML:{__html:r}}))};return{loading:r}};var l=c;function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return s.apply(this,arguments)}var f=u()(new(r(10).SameLoopPromise)(function(e,t){var n=93;try{var a=r(n);return e(a)}catch(e){}r.e(0).then(function(n){try{var a=r(93);a.__webpackChunkName="react_markdown_2310f29285bb72f338f5fec99785c0fb";e(a)}catch(e){t(e)}}.bind(null,r)).catch(r.oe)}),l(".Markdown"));var d=function e(t){return a.a.createElement("a",s({},t,{target:"_blank",rel:"noopener noreferrer"}))};var p={link:d};var v=function e(t){var r=t.className,n=t.source;return a.a.createElement(f,{className:r,source:n,renderers:p})};var m=t["a"]=v},49:function(e,t,r){"use strict";t["a"]=a;function n(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function a(e){var t=e.target;this.setState(n({},t.id,t.value))}},92:function(e,t,r){"use strict";r.d(t,"a",function(){return N});var n=r(8);var a=r.n(n);var o=r(0);var u=r.n(o);var i=r(36);var c=r.n(i);var l=r(10);var s=r.n(l);var f=r(35);var d=r(48);var p=r(94);var v=r.n(p);var m=r(49);var h=r(9);var b=r.n(h);var y=r(23);function g(e){g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return g(e)}function w(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function u(e,t){try{var r=o[e](t);var u=r.value}catch(e){a(e);return}r.done?n(u):Promise.resolve(u).then(i,c)}function i(e){u("next",e)}function c(e){u("throw",e)}i()})}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function _(e,t,r){t&&E(e.prototype,t);r&&E(e,r);return e}function O(e,t){if(t&&("object"===g(t)||"function"===typeof t))return t;return C(e)}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=function e(){return u.a.createElement("div",{className:"column"},u.a.createElement("textarea",{style:{height:"calc(300px - 1.2rem)",margin:0}}))};var x=s()(new(r(10).SameLoopPromise)(function(e,t){var n=63;try{var a=r(n);return e(a)}catch(e){}r.e(1).then(function(n){try{var a=r(63);a.__webpackChunkName="comps_CodeMirror_51c113b8f0eb112cf9be60e9d3293726";e(a)}catch(e){t(e)}}.bind(null,r)).catch(r.oe)}),{loading:S,ssr:false});var P={name:"",dir:"",md:"## New Document!!",editMode:false,error:null,pending:false};var N=function(e){j(t,e);function t(){var e;var r,n;k(this,t);for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return O(n,(r=n=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),Object.defineProperty(C(n),"state",{configurable:true,enumerable:true,writable:true,value:P}),Object.defineProperty(C(n),"updVal",{configurable:true,enumerable:true,writable:true,value:m["a"].bind(C(n))}),Object.defineProperty(C(n),"updMd",{configurable:true,enumerable:true,writable:true,value:function e(t){return n.setState({md:t})}}),Object.defineProperty(C(n),"submit",{configurable:true,enumerable:true,writable:true,value:function(){var e=w(a.a.mark(function e(){var t,r,o,u,i,l,s,f,d,v,m,h,g,w,k,E;return a.a.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:t=n.state,r=t.name,o=t.md,u=t.dir,i=t.editMode;l={name:Object(p["checkName"])(r),dir:Object(p["checkDir"])(u),md:o};s=function e(t){return n.setState({pending:false,error:t})};f="can only contain A-Z, a-z, 0-9, -, or . and not start or end with .";if(l.name){a.next=6;break}return a.abrupt("return",s("Document name "+(0===l.name?"can not be empty":f)));case 6:if(!(!l.dir&&0!==l.dir)){a.next=10;break}return a.abrupt("return",s("Directory "+f));case 10:0===l.dir&&(l.dir="");case 11:if(!(0===l.md.trim().length)){a.next=13;break}return a.abrupt("return",s("Content can not be empty"));case 13:d=b()("docs"),v="POST",m={Authorization:Object(y["a"])(),"Content-Type":"application/json"};if(!i){a.next=22;break}h=0;g=Object.keys(l);g.forEach(function(e){if(l[e]===n.props.doc[e]){delete l[e];h++}});if(!(g.length===h)){a.next=20;break}return a.abrupt("return");case 20:d=b()("docs/"+n.props.doc.id);v="PATCH";case 22:n.setState({error:null,pending:true});a.next=25;return fetch(d,{headers:m,method:v,body:JSON.stringify(l)}).catch(s);case 25:w=a.sent;a.prev=26;a.next=29;return w.json();case 29:l=a.sent;a.next=35;break;case 32:a.prev=32;a.t0=a["catch"](26);l={message:"An error occurred submitting doc"};case 35:if(!w.ok){a.next=38;break}k=l,E=k.id;return a.abrupt("return",c.a.push({pathname:"/k",query:{id:E}},b()("k/".concat(E))));case 38:s(l.message);case 39:case"end":return a.stop()}},e,this,[[26,32]])}));return function t(){return e.apply(this,arguments)}}()}),r))}_(t,[{key:"render",value:function e(){var t=this.state,r=t.md,n=t.dir,a=t.name,o=t.error,i=t.pending;var c={paddingTop:10};return u.a.createElement(f["a"],null,u.a.createElement("div",{className:"row fill",style:c},u.a.createElement("div",{className:"column column-50"},u.a.createElement(d["a"],{className:"fill Markdown",source:r})),u.a.createElement("div",{className:"column column-50"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column column-60"},u.a.createElement("input",{type:"text",maxLength:250,placeholder:"New document name",id:"name",value:a,onChange:this.updVal})),u.a.createElement("div",{className:"column"},u.a.createElement("input",{type:"text",maxLength:1024,placeholder:"Subdirectory (optional)",id:"dir",value:n,onChange:this.updVal}))),u.a.createElement("div",{className:"row"},u.a.createElement(x,{value:r,className:"column WrapCodeMirror",onChange:this.updMd,onSubmit:this.submit,options:{theme:"monokai",mode:"markdown",lineWrapping:true}})),u.a.createElement("div",{className:"row",style:{marginTop:5}},u.a.createElement("div",{className:"column"},u.a.createElement("span",null,o),u.a.createElement("button",{className:"float-right",style:{marginTop:5},onClick:i?null:this.submit},"Submit"))))))}}],[{key:"getDerivedStateFromProps",value:function e(t,r){var n=t.doc;if(n){var a=n.name,o=n.dir,u=n.md;return{name:a,md:u,dir:o,editMode:true}}if(r.id)return P;return null}}]);return t}(o["Component"])},94:function(e,t){var r=function e(t){if(t.length>255||0===t.length)return false;var r=t.length-1;for(var n=0;n<t.length;n++){var a=t.charCodeAt(n);if(!(a>47&&a<58)&&!(a>64&&a<91)&&!(a>96&&a<123)&&!(95===a)&&!(45===a)&&!((46===a||32===a)&&0!==n&&n!==r))return false}return true};e.exports={checkDir:function e(t){if("string"!==typeof t)return false;t=t.trim();if(0===t.length)return 0;if(t.indexOf("/")>-1){t=t.split("/").filter(function(e){return 0!==e.length});if(1===t.length){r(t[0])||false;t=t[0]}else if(0===t.length)t="";else if(t.some(function(e){return!r(e)}))return false}else if(!r(t))return false;return Array.isArray(t)?t.join("/"):t},checkName:function e(t){if("string"!==typeof t)return false;t=t.trim();if(0===t.length)return 0;if(!r(t))return false;return t}}},95:function(e,t,r){"use strict";var n=r(8);var a=r.n(n);var o=r(0);var u=r.n(o);var i=r(22);var c=r(34);var l=r.n(c);var s=r(29);var f=r(9);var d=r.n(f);var p=r(23);function v(e){v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return v(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function b(e,t,r){t&&h(e.prototype,t);r&&h(e,r);return e}function y(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;return w(e)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function u(e,t){try{var r=o[e](t);var u=r.value}catch(e){a(e);return}r.done?n(u):Promise.resolve(u).then(i,c)}function i(e){u("next",e)}function c(e){u("throw",e)}i()})}}var E=function(){var e=k(a.a.mark(function e(t,r){var n,o,u,i;return a.a.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:u=Object(p["a"])(r);if(u){a.next=3;break}return a.abrupt("return",{found:n,doc:o,id:t});case 3:a.next=5;return l()(d()("docs/"+t,Boolean(r)),{method:"GET",headers:{Authorization:u}});case 5:i=a.sent;if(!i.ok){a.next=11;break}a.next=9;return i.json();case 9:o=a.sent;n=true;case 11:return a.abrupt("return",{found:n,doc:o,id:t});case 12:case"end":return a.stop()}},e,this)}));return function t(r,n){return e.apply(this,arguments)}}();t["a"]=function(e){var t=function(t){g(r,t);function r(){var e;var t,n;m(this,r);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return y(n,(t=n=y(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),Object.defineProperty(w(n),"state",{configurable:true,enumerable:true,writable:true,value:{found:false,id:null,doc:{}}}),t))}b(r,[{key:"componentDidUpdate",value:function(){var e=k(a.a.mark(function e(t){var r,n,o,u;return a.a.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=this.props,n=r.user,o=r.found,u=r.id;if(!(t.user.email===n.email||o)){a.next=3;break}return a.abrupt("return");case 3:if(n.email){a.next=5;break}return a.abrupt("return");case 5:a.t0=this;a.next=8;return E(u);case 8:a.t1=a.sent;a.t0.setState.call(a.t0,a.t1);case 10:case"end":return a.stop()}},e,this)}));return function t(r){return e.apply(this,arguments)}}()},{key:"render",value:function t(){return u.a.createElement(e,this.state)}}],[{key:"getInitialProps",value:function(){var e=k(a.a.mark(function e(t){var r,n;return a.a.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=t.query,n=t.req;a.next=3;return E(r.id,n);case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},e,this)}));return function t(r){return e.apply(this,arguments)}}()},{key:"getDerivedStateFromProps",value:function e(t,r){var n=t.found,a=t.id,o=t.doc;if(r.found!==n)return{found:n,id:a,doc:o};return null}}]);return r}(o["Component"]);return Object(i["b"])(s["a"])(t)}}},[235]);return{page:e.default}},[{id:0,src:"chunks/react_markdown_2310f29285bb72f338f5fec99785c0fb.js"},{id:1,src:"chunks/comps_CodeMirror_51c113b8f0eb112cf9be60e9d3293726.js"}]);